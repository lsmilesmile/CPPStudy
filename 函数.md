# 函数

## 7.1 函数基本知识

- 提供函数定义
- 提供函数原型
- 调用函数



### 7.1.1 定义函数

函数分两类

- 有返回值

  **typeName functionName(parameterList)**

  **{**

  ​    **statements**

  ​    **return value;**

  **}**

  **返回值限制：不能是数组，但可以是其他任何类型-整数、浮点数、指针、结构、对象。**

  **通常，函数通过将返回值赋值到指定的CPU寄存器或内存单元中来将其返回。**

- 无返回值(void函数)

  **void functionName(parameterList)**

  **{**

  ​    **statements(s)**

  ​    **return;**

  **}**

  

**函数原型**

1. 为什么要函数原型

   原型描述了函数到编译器的接口，它将函数返回值的类型以及参数的类型和数量告诉编译器。

2. 原型语法

   函数原因是一条语句，以分号结束。

3. 原型的功能

   原型确保：

   - 编译器正确处理函数返回值
   - 编译器检查使用参数数目是否正确
   - 编译器检查使用的参数类型是否正确。如果不正确，则转换为正确的类型。



## 7.2 函数参数和按值传递

```c++
double volume = cube(side);
```

side是变量，值为5，cube()函数头

```c++
double cube(double x);
```

**被调用时，该函数将创建一个新的名为x的double变量，并将其初始化为5。这样，cube()执行的操作将不会影响到main()中的数据，因为cube()使用的是side的副本，而不是原本的数据。用于接收传递值的变量被称为形参。传递给函数的值被称为实参。**



## 7.3 函数和数组

如

```c++
int sum_arr(int arr[], int n);
```

arr是一个指针，但是在其他地方使用时，可以将其当作数组。

```c++
#include <iostream>
#include <string>
#include <afx.h>


const int ArSize = 8;
int sum_arr(int arr[], int n);
int main() {
	int cookies[ArSize] = { 1, 2, 3, 5, 2, 23 };
	int sum = sum_arr(cookies, ArSize);
	std::cout << "sum: " << sum << std::endl;
	system("pause");
	return 0;
}

int sum_arr(int arr[], int n) {
	int total = 0;
	for (int i = 0; i < n; ++i) {
		total += arr[i];
	}
	return total;
}
```

**sum: 36**
**请按任意键继续. . .**



### 7.3.1 函数如何使用指针来处理数组

C++将数组名解释为第一个元素的地址

```c++
cookies == &cookies[0];
```

cookies是数组名，因此，cookies是第一个元素的地址，因此函数传递的是地址。由于数组元素是int，所以cookies的类型必须是int指针，即**int***，所以函数头可以写成：

```c++
int sum_arr(int * arr, int n);
```

这两个函数头都是正确的，因为在C++中，当且仅当用于函数头或函数原型中，int *arr和int arr[]的含义才是相同的。