# C++字符串

## C++中字符数组与string的相互转换

### 1. 字符数组转化成string类型

```c++
#include <iostream>
#include <string>

int main() {
	char ch[] = "liu xiao";
	std::string str1(ch);
	std::cout << str1;
	system("pause");
	return 0;
}
```

**liu xiao请按任意键继续. . .**



### 2. 将string类型转换为字符数组

```c++
#include <iostream>
#include <string>

int main() {
	char buf[10];
	std::string str("liu xiao");
    
    // 方式一
	strcpy(buf, str.c_str());
    
    // 方式二
    strncpy(buf, str.c_str(), 10);
    
	std::cout << buf << "\n";
	system("pause");
	return 0;
}
```



## c_str()

语法：**const char* std::string::c_str() const;**

c_str()函数返回一个指向正规C字符串的指针，内容与string相同。

为了与C语言兼容，在C语言中没有string类型，所以要通过string类对象的成员函数c_str()把string对象转换成C中的字符串形式。

不能像下面这样使用

```c++
#include <iostream>
#include <string>

int main() {
	const char* c;
	std::string s = "1234";
	c = s.c_str();
	std::cout << c << std::endl;
	s = "adfa";
	std::cout << c << std::endl;

	system("pause");
	return 0;
}
```

**1234**
**adfa**
**请按任意键继续. . .**

这样的话，如果改变了s的内容，则c也被改变了。

更好的处理方式：**strcpy()**

```c++
#include <iostream>
#include <string>

int main() {
	char* c = new char[10];
	std::string s = "1234";
	strcpy(c, s.c_str());
	std::cout << c << std::endl;
	s = "adfa";
	std::cout << c << std::endl;
	delete[] c;
	system("pause");
	return 0;
}
```

**1234**
**1234**
**请按任意键继续. . .**